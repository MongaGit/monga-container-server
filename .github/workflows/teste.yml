name: Deploy to Docker Container
on: workflow_dispatch

jobs:
  clone:
    name: Project-Zomboid Start Server
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set up SSH key
        uses: appleboy/ssh-action@v0.1.10
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          password: ${{ secrets.PASSWORD }}
          port: ${{ secrets.PORT }}
          script: |
            cd /home/monga/monga-container-server/project-zomboid
            echo "ADMINPASSWORD=${{ vars.project-zomboid.ADMINPASSWORD }}"
            echo "DEBUG=${{ secrets.DEBUG }}"
            echo "MODFOLDERS=${{ secrets.project-zomboid.MODFOLDERS }}"
            echo "MOD_IDS=${{ vars.MOD_IDS }}"
            echo "NOSTEAM=${{ vars.NOSTEAM }}"
            echo "PORT=${{ vars.project-zomboid.PORT }}"
            echo "SERVERNAME=${{ secrets.project-zomboid.SERVERNAME }}"
            echo "STEAMVAC=${{ secrets.project-zomboid.STEAMVAC }}"
            echo "WORKSHOP_IDS=${{ vars.WORKSHOP_IDS }}"
            echo "Docker-Compose Up | Project-Zomboid Server Starting"
            
